{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"SelfRelationView","dependencies@STRING":["/libs/bndly/data/scripts/cy/CopyUtil","/libs/bndly/data/scripts/cy/FormBinder","/libs/bndly/data/scripts/cy/form/Forms","/libs/bndly/data/scripts/cy/ui/container/ViewContainer","/libs/bndly/data/scripts/cy/form/Forms"],"script@STRING":"var SelfRelationView = ViewContainer.extend({\r\n\tconstruct: function(config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\r\n\t\tvar entityType = config.entity.clazzName();\r\n\r\n\t\tvar sections;\r\n\t\ttry {\r\n\t\t\tsections = Forms[entityType];\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"no sections for \" + entityType);\r\n\t\t}\r\n\t\tif (!sections) {\r\n\t\t\tsections = {};\r\n\t\t} else {\r\n\t\t\tif (sections instanceof Array) {\r\n\t\t\t\tsections = {\r\n\t\t\t\t\tsections: sections\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.assertPersistIsHandled(sections);\r\n\t\tvar view = new FormBinder(CopyUtil.copyConfig(sections, {\r\n\t\t\tentity: config.entity,\r\n\t\t\tkeyedInputs: config.keyedInputs,\r\n\t\t\tignoredMembers: {\r\n\t\t\t\tlinks: true,\r\n\t\t\t\tpage: true\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tconfig.items = [\r\n\t\t\tview\r\n\t\t];\r\n\t\tthis.callSuper(arguments, config);\r\n\t},\r\n\tassertPersistIsHandled: function(config) {\r\n\t\tif (!config.listeners) {\r\n\t\t\tconfig.listeners = {};\r\n\t\t}\r\n\t\tif (!config.listeners.beforePersist) {\r\n\t\t\tconfig.listeners.beforePersist = function(entry, inputsByMemberOrKey, cb) {\r\n\t\t\t\tcb();\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n});\r\nreturn SelfRelationView;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}
