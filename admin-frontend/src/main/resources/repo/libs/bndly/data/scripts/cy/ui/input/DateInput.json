{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"DateInput","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/input/InputTypeRegistry","/libs/bndly/data/scripts/cy/ui/input/TextInput"],"script@STRING":"var DateInput = TextInput.extend({\r\n\tconstruct: function(config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\t\tconfig.type = \"date\";\r\n\t\tif(!config.placeholder) {\r\n\t\t\tconfig.placeholder = \"yyyy-mm-dd\";\r\n\t\t}\r\n\t\tthis.callSuper(arguments, config);\r\n\t},\r\n\tdestroy: function() {\r\n\t\targuments.callee.$parent.destroy.call(this);\r\n\t},\r\n\trenderTo: function(renderTarget) {\r\n\t\tthis.callSuper(arguments, renderTarget);\r\n\t\tvar _this = this;\r\n\t\t$(this.input).blur(function(){\r\n\t\t\tvar v = _this.getValue();\r\n\t\t\tif(v === undefined) {\r\n\t\t\t\t_this.setValue(null);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tgetValue: function() {\r\n\t\tvar raw = $(this.input).val();\r\n\t\tif(raw === \"\") {\r\n\t\t\t// invalid input\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif(!raw) {\r\n\t\t\traw = null;\r\n\t\t} else {\r\n\t\t\tvar s = raw.split(\"-\");\r\n\t\t\tvar d = new Date(s[0], s[1]-1, s[2], 0, 0, 0, 0);\r\n\t\t\traw = d;\r\n\t\t}\r\n\t\tthis._value = raw;\r\n\t\treturn raw;\r\n\t},\r\n\tsetValue: function(value) {\r\n\t\tif(value === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!value) {\r\n\t\t\tthis._value = null;\r\n\t\t\tthis.callSuper(arguments, value);\r\n\t\t} else {\r\n\t\t\tif (!(value instanceof Date)) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\t\t\tthis._value = value;\r\n\t\t\tif(value) {\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\ttmp[0] = 1900+value.getYear();\r\n\t\t\t\ttmp[1] = value.getMonth()+1;\r\n\t\t\t\tif(tmp[1] < 10) {\r\n\t\t\t\t\ttmp[1] = \"0\"+tmp[1];\r\n\t\t\t\t}\r\n\t\t\t\ttmp[2] = value.getDate();\r\n\t\t\t\tif(tmp[2] < 10) {\r\n\t\t\t\t\ttmp[2] = \"0\"+tmp[2];\r\n\t\t\t\t}\r\n\t\t\t\tvalue = tmp.join(\"-\");\r\n\t\t\t}\r\n\t\t\tthis.callSuper(arguments, value);\r\n\t\t}\r\n\r\n\t}\r\n});\r\nInputTypeRegistry.register(\"DateInput\", DateInput);\r\nreturn DateInput;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}
