{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"InputViewContainer","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/input/Button","/libs/bndly/data/scripts/cy/ui/Link","/libs/bndly/data/scripts/cy/ui/Text","/libs/bndly/data/scripts/cy/ui/ViewComponent","/libs/bndly/data/scripts/cy/ui/input/InputViewComponent","/libs/bndly/data/scripts/cy/Collection","/libs/bndly/data/scripts/cy/ui/container/ViewContainer"],"script@STRING":"var InputViewContainer = ViewContainer.extend({\r\n\tconstruct: function(config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\r\n\t\tif(!config.labelPosition) {\r\n\t\t\tconfig.labelPosition = \"left\";\r\n\t\t}\r\n\t\tconfig.componentConfigs = new Collection();\r\n\r\n\t\tthis.callSuper(arguments, config);\r\n\t},\r\n\tdestroy: function() {\r\n\t\tthis.invokeSuper(arguments);\r\n\t\tthis.componentConfigs.each(function(componentConfig) {\r\n\t\t\tif (componentConfig.controlGroup) {\r\n\t\t\t\t$(componentConfig.controlGroup).remove();\r\n\t\t\t}\r\n\t\t\tif (componentConfig.component instanceof ViewComponent) {\r\n\t\t\t\tcomponentConfig.component.destroy();\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\trenderTo: function(renderTarget) {\r\n\t\tif (!this.element) {\r\n\t\t\tthis.element = $(renderTarget);\r\n\t\t}\r\n\t\tthis.invokeSuper(arguments);\r\n\t\tif(this.hidden) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t},\r\n\trenderItem: function(component) {\r\n\t\tif (this.element) {\r\n\t\t\tvar isInputComponent = component instanceof InputViewComponent;\r\n\t\t\tvar isButton = component instanceof Button;\r\n\t\t\tvar isLink = component instanceof Link;\r\n\t\t\tif (isInputComponent || isButton || isLink || (component instanceof InputViewContainer)) {\r\n\t\t\t\tvar componentConfig = {};\r\n\t\t\t\tcomponentConfig.component = component;\r\n\t\t\t\tif (isInputComponent) {\r\n\t\t\t\t\tif(this.labelPosition === \"left\") {\r\n\t\t\t\t\t\t$(this.element).closest(\"form\").filter(\":not(.form-horizontal)\").addClass(\"form-horizontal\");\r\n\t\t\t\t\t\tcomponentConfig.controlGroup = $(this.element).append(\"<div class=\\\"form-group\\\"></div>\").children().last();\r\n\t\t\t\t\t\tcomponentConfig.labelText = new Text({value: component.getLabel()});\r\n\t\t\t\t\t\tcomponentConfig.label = $(componentConfig.controlGroup).append(\"<label class=\\\"col-sm-2 control-label\\\"></label>\").children().last();\r\n\t\t\t\t\t\t$(componentConfig.label).attr(\"for\", component.getName());\r\n\t\t\t\t\t\tcomponentConfig.labelText.renderTo($(componentConfig.label));\r\n\t\t\t\t\t\tcomponentConfig.controls = $(componentConfig.controlGroup).append(\"<div class=\\\"col-sm-10\\\"></div>\").children().last();\r\n\t\t\t\t\t\tcomponent.renderTo($(componentConfig.controls));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcomponentConfig.controlGroup = $(this.element).append(\"<div class=\\\"form-group\\\"></div>\").children().last();\r\n\t\t\t\t\t\tcomponentConfig.labelText = new Text({value: component.getLabel()});\r\n\t\t\t\t\t\tcomponentConfig.label = $(componentConfig.controlGroup).append(\"<label></label>\").children().last();\r\n\t\t\t\t\t\t$(componentConfig.label).attr(\"for\", component.getName());\r\n\t\t\t\t\t\tcomponentConfig.labelText.renderTo($(componentConfig.label));\r\n\t\t\t\t\t\tcomponent.renderTo($(componentConfig.controlGroup));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomponent.renderTo($(this.element));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.componentConfigs.add(componentConfig);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn(\"ignoring non-input component in inputViewContainer\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tremoveItem: function(component) {\r\n\t\tcomponent.destroy();\r\n\t\tthis.componentConfigs.each(function(c) {\r\n\t\t\tif (c.component === component) {\r\n\t\t\t\tif (c.controlGroup) {\r\n\t\t\t\t\tc.controlGroup.remove();\r\n\t\t\t\t}\r\n\t\t\t\tif (c.component instanceof ViewComponent) {\r\n\t\t\t\t\tc.component.destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\thide:function(){\r\n\t\tthis.items.each(function(item){\r\n\t\t\tif(item.hide) {\r\n\t\t\t\titem.hide();\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tthis.componentConfigs.each(function(componentConfig){\r\n\t\t\tif(componentConfig.controlGroup) {\r\n\t\t\t\t$(componentConfig.controlGroup).hide();\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\tshow:function(){\r\n\t\tthis.items.each(function(item){\r\n\t\t\tif(item.show) {\r\n\t\t\t\titem.show();\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tthis.componentConfigs.each(function(componentConfig){\r\n\t\t\tif(componentConfig.controlGroup) {\r\n\t\t\t\t$(componentConfig.controlGroup).show();\r\n\t\t\t}\r\n\t\t}, this);\r\n\t}\r\n});\r\nreturn InputViewContainer;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":"","export@STRING":""}}
