{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"StringListInput","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/Text","/libs/bndly/data/scripts/cy/ui/input/InputTypeRegistry","/libs/bndly/data/scripts/cy/Collection","/libs/bndly/data/scripts/cy/ui/input/TextInput"],"script@STRING":"var StringListInput = TextInput.extend({\r\n\tconstruct: function(config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\t\tif(!config.values) {\r\n\t\t\tconfig.values = new Collection();\r\n\t\t}\r\n\t\tthis.callSuper(arguments, config);\r\n\t\tthis.listen(this.values, \"inserted\", this.stringValueAdded, this);\r\n\t},\r\n\tdestroy: function() {\r\n\t\targuments.callee.$parent.destroy.call(this);\r\n\t},\r\n\trenderTo: function(renderTarget) {\r\n\t\tthis.valuesElement = $(renderTarget).append(\"<div></div>\").children().last();\r\n\t\tthis.invokeSuper(arguments);\r\n\t\tvar _this = this;\r\n\t\t$(this.input).keyup(function(event) {\r\n\t\t\t_this.keyup(event);\r\n\t\t});\r\n\r\n\t\tthis.renderStringValues();\r\n\t},\r\n\tkeyup: function(event) {\r\n\t\t// Enter key = keycode 13\r\n\t\tif (event.which === 13) {\r\n\t\t\tvar currentValue = $(this.input).val();\r\n\t\t\tif(currentValue) {\r\n\t\t\t\tcurrentValue = currentValue.trim();\r\n\t\t\t\tif(currentValue !== \"\") {\r\n\t\t\t\t\t// new value entered\r\n\t\t\t\t\tthis.values.add(currentValue);\r\n\t\t\t\t\t$(this.input).val(\"\");\r\n\t\t\t\t\tthis.inputChanged();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetValue: function() {\r\n\t\tif(this.values instanceof Collection) {\r\n\t\t\treturn this.values;\r\n\t\t}\r\n\t},\r\n\tsetValue: function(value) {\r\n\t\tif(value instanceof Collection) {\r\n\t\t\tthis.values = value;\r\n\t\t}\r\n\t},\r\n\trenderStringValues: function() {\r\n\t\tthis.values.each(function(string) {\r\n\t\t\tthis.renderStringValue(string);\r\n\t\t}, this);\r\n\t},\r\n\tstringValueAdded: function(string) {\r\n\t\tif(this.valuesElement) {\r\n\t\t\tthis.renderStringValue(string);\r\n\t\t}\r\n\t},\r\n\trenderStringValue: function(string) {\r\n\t\tvar stringText = new Text({value: string, cls: \"label label-info\"});\r\n\t\tstringText.renderTo($(this.valuesElement));\r\n\t\t$(stringText.element).css({\r\n\t\t\tmargin: \"2px\"\r\n\t\t});\r\n\t\tvar removeIcon = $(stringText.element).append(\"<i class=\\\"icon-remove\\\"></i>\").children().last();\r\n\t\tstringText.element.attr(\"value\", string);\r\n\t\tvar _this = this;\r\n\t\t$(removeIcon).click(function() {\r\n\t\t\tstringText.destroy();\r\n\t\t\t_this.values.remove(string);\r\n\t\t});\r\n\t}\r\n});\r\nInputTypeRegistry.register(\"StringListInput\", StringListInput);\r\nreturn StringListInput;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}
