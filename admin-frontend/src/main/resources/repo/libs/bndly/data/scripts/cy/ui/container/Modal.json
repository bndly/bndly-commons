{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"Modal","dependencies@STRING":["/libs/bndly/data/scripts/cy/HTMLUtil","/libs/bndly/data/scripts/cy/ui/ViewComponent"],"script@STRING":"var Modal = ViewComponent.extend({\r\n\tconstruct: function (config) {\r\n\t\tif (!config) {\r\n\t\t\tconfig = {};\r\n\t\t}\r\n\t\tthis.callSuper(arguments, config);\r\n\t},\r\n\trenderTo: function (renderTarget) {\r\n\t\tvar bonusAttributes = {\r\n\t\t\tclass: \"modal hide fade\"\r\n\t\t};\r\n\t\tif (this.large) {\r\n\t\t\tbonusAttributes.class += \" large\";\r\n\t\t}\r\n\r\n\t\tvar alertClass;\r\n\t\tif (this.isWarning) {\r\n\t\t\talertClass = \"alert-block\";\r\n\t\t} else if (this.isError) {\r\n\t\t\talertClass = \"alert-error\";\r\n\t\t} else if (this.isInfo) {\r\n\t\t\talertClass = \"alert-info\";\r\n\t\t} else if (this.isSuccess) {\r\n\t\t\talertClass = \"alert-success\";\r\n\t\t}\r\n\r\n\t\tif (alertClass) {\r\n\t\t\tbonusAttributes.class += \" alert \" + alertClass;\r\n\t\t\tbonusAttributes.style = \"padding: inherit;\";\r\n\t\t}\r\n\r\n\t\tthis.modal = $(renderTarget)\r\n\t\t\t\t.append(\"<div \" + HTMLUtil.serializeBonusAttributes(bonusAttributes) + \"></div>\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\r\n\t\tvar _this = this;\r\n\t\t$(this.modal)\r\n\t\t\t\t.on('hidden', function () {\r\n\t\t\t\t\tif (_this.destroyOnClose) {\r\n\t\t\t\t\t\t_this.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\tthis.header = $(this.modal)\r\n\t\t\t\t.append(\"<div class=\\\"modal-header\\\">\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\t\tvar style = \"\";\r\n\t\tif (alertClass) {\r\n\t\t\tstyle = \"style=\\\"right: inherit;\\\"\";\r\n\t\t}\r\n\t\tthis.closeButton = $(this.header)\r\n\t\t\t\t.append(\"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" \" + style + \">&times;</button>\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\t\tthis.headerTextWrapper = $(this.header)\r\n\t\t\t\t.append(\"<h3></h3>\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\t\tif (this.headerText) {\r\n\t\t\t$(this.headerTextWrapper)\r\n\t\t\t\t\t.append(this.headerText)\r\n\t\t\t\t\t.children()\r\n\t\t\t\t\t.last();\r\n\t\t}\r\n\r\n\t\tthis.body = $(this.modal)\r\n\t\t\t\t.append(\"<div class=\\\"modal-body\\\"></div>\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\t\tthis.footer = $(this.modal)\r\n\t\t\t\t.append(\"<div class=\\\"modal-footer\\\"></div>\")\r\n\t\t\t\t.children()\r\n\t\t\t\t.last();\r\n\t\tif (this.actions) {\r\n\t\t\tvar createClickCallback = function (modal, btn, event, action) {\r\n\t\t\t\treturn function () {\r\n\t\t\t\t\tmodal.fireEvent(event, btn, action);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t\tfor (var i in this.actions) {\r\n\t\t\t\tvar action = this.actions[i];\r\n\t\t\t\tif (action.event) {\r\n\t\t\t\t\tvar label = action.labelText;\r\n\t\t\t\t\tif (!label) {\r\n\t\t\t\t\t\tlabel = action.event;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar btn = $(this.footer)\r\n\t\t\t\t\t\t\t.append(\"<a href=\\\"#\\\" class=\\\"btn\\\">\" + label + \"</a>\")\r\n\t\t\t\t\t\t\t.children()\r\n\t\t\t\t\t\t\t.last();\r\n\t\t\t\t\t$(btn)\r\n\t\t\t\t\t\t\t.click(createClickCallback(this, btn, action.event, action));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tshow: function () {\r\n\t\t$(this.modal).modal('show');\r\n\t},\r\n\thide: function () {\r\n\t\t$(this.modal).modal('hide');\r\n\t},\r\n\tdestroy: function () {\r\n\t\t$(this.modal).remove();\r\n\t}\r\n});\r\nreturn Modal;","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":""}}
