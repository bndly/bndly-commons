{"type":"cy:bean","properties":{"beanType@STRING":"cy:requiremodule","name@STRING":"BusinessProcessDefinition","dependencies@STRING":["/libs/bndly/data/scripts/cy/ui/input/Button","/libs/bndly/data/scripts/cy/ui/IFrame"],"script@STRING":"return {\r\n\tlisteners: {\r\n\t\tbeforePersist: function(entry, inputsByMemberOrKey, cb) {\r\n\t\t\tconsole.log(\"before persist\");\r\n\t\t\tinputsByMemberOrKey.upload.addSingleInvocationListener(\"uploaded\", function(input, data) {\r\n\t\t\t\tentry.setResourceName(data.getName());\r\n\t\t\t\tcb();\r\n\t\t\t}, this);\r\n\t\t\tinputsByMemberOrKey.upload.upload();\r\n\t\t}\r\n\t},\r\n\tsections: [\r\n\t\t{\r\n\t\t\titems: [{\r\n\t\t\t\t\tmember: \"engineName\",\r\n\t\t\t\t\tlabelText: \"Engine name\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"name\",\r\n\t\t\t\t\tlabelText: \"Name\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tkey: \"upload\",\r\n\t\t\t\t\tlabelText: \"Upload\",\r\n\t\t\t\t\tconstructorFn: \"FileInput\",\r\n\t\t\t\t\tinputConfig: {\r\n\t\t\t\t\t\teager: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function(instance) {\r\n\t\t\t\t\t\tinstance.addListener(\"selected\", function() {\r\n\t\t\t\t\t\t\tvar fd = instance.getFileDescription();\r\n\t\t\t\t\t\t\tinstance.entity.setResourceName(fd.name);\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\tinstance.entity.addListener(\"persisted\", function() {\r\n\t\t\t\t\t\t\tinstance.entity.addSingleInvocationListener(\"reloaded\", function(data) {\r\n\t\t\t\t\t\t\t\tif (instance.isFileSelected()) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"should upload now\");\r\n\t\t\t\t\t\t\t\t\tvar ul = data.hasLink(\"upload\");\r\n\t\t\t\t\t\t\t\t\tif (ul) {\r\n\t\t\t\t\t\t\t\t\t\tinstance.uploadToUrl(ul.getHref());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"nothing to upload\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"category\",\r\n\t\t\t\t\tlabelText: \"Category\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"version\",\r\n\t\t\t\t\tlabelText: \"Version\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"resourceName\",\r\n\t\t\t\t\tlabelText: \"Resource name\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"diagramResourceName\",\r\n\t\t\t\t\tlabelText: \"Diagram name\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"description\",\r\n\t\t\t\t\tlabelText: \"Description\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"deploymentId\",\r\n\t\t\t\t\tlabelText: \"Deployment ID\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"key\",\r\n\t\t\t\t\tlabelText: \"Key\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}, {\r\n\t\t\t\t\tmember: \"id\",\r\n\t\t\t\t\tlabelText: \"ID\",\r\n\t\t\t\t\tgenerated: true\r\n\t\t\t\t}]\r\n\t\t}\r\n\t]\r\n};","initMethod@STRING":"","proxy@STRING":"","moduleId@STRING":"","export@STRING":""}}
